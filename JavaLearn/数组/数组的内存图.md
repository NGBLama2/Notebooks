# 数组的内存图

## Java内存分配

JVM运行的时候会在内存中申请一片空间用于存储：

- 栈：方法运行时使用的内存，比如main方法运行，进入栈中执行
- 堆：存储对象或者数组，new创建的都存放在这里
- 方法区：存储可以运行的class文件
- 本地方法栈：JVM在使用操作系统功能时使用，与开发无关
- 寄存器：给CPU使用，与开发无关

![image-20241220222307478](https://pic.hibugs.net/NGBTEAM/image-20241220222307478.png)

在JDK8之后，取消了方法区，新增原空间，把原来方法区的功能进行拆分，有的功能放到了堆中，有的功能放到了元空间中

![image-20241220222623845](https://pic.hibugs.net/NGBTEAM/image-20241220222623845.png)

## 栈

举一个很简单的代码段的例子，下图就是一段代码在内存中的样子

![image-20241220222152532](C:/Users/82635/AppData/Roaming/Typora/typora-user-images/image-20241220222152532.png)

## 数组的内存图

接下来用一段简单的代码配合图片来说明数组在内存中如何存储

定义一个数组，栈和堆的样子

![image-20241221001448665](https://pic.hibugs.net/NGBTEAM/image-20241221001448665.png)

声明的arr，其实是用来存储数组在堆中存放的地址，而实际上new的数组是存放在堆中，通过赋值符号将数组存放在堆中的地址赋值给arr

### 当两个数组指向同一个空间的内存图

![image-20241221004007742](https://pic.hibugs.net/NGBTEAM/image-20241221004007742.png)

由于只new一次，所以在堆中只有一个实际存放的数组，而arr2 = arr1，实际上是把arr1中存放的地址赋值给了arr2
